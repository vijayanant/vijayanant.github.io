<div class="post-card">
  {{ $postPermalink := .Permalink }}
  {{ $featuredImage := .Params.featured_image }}
  {{ if $featuredImage }}
    {{/* Try to find the image resource */}}
    {{ $imageResource := .Resources.GetMatch $featuredImage }}
    {{ if $imageResource }}
        {{/* Check if the image is an SVG */}}
        {{ if eq $imageResource.MediaType.SubType "svg" }}
            <a href="{{ $postPermalink }}">
                <img src="{{ $imageResource.RelPermalink }}" alt="{{ .Title }}" class="post-card-image" loading="lazy">
            </a>
        {{ else }}
            {{/* If resource found and not SVG, resize it */}}
            {{ $thumbnail := $imageResource.Fill "400x250 webp" }}
            <a href="{{ $postPermalink }}">
                <img src="{{ $thumbnail.RelPermalink }}" alt="{{ .Title }}" class="post-card-image" width="{{ $thumbnail.Width }}" height="{{ $thumbnail.Height }}" loading="lazy">
            </a>
        {{ end }}
    {{ else }}
        {{/* If resource not found (e.g. static image), use as is but still try to be safe */}}
        <a href="{{ $postPermalink }}">
            <img src="{{ $featuredImage | relURL }}" alt="{{ .Title }}" class="post-card-image" loading="lazy">
        </a>
    {{ end }}
  {{ end }}
  <h2 class="post-card-title">
    <a href="{{ .Permalink }}">{{ .Title }}</a>
  </h2>
  <div class="post-card-meta">
    {{ .Date.Format "January 2, 2006" }} &middot; {{ .ReadingTime }} min read
  </div>
</div>