<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet">
  <defs>
    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
      <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#38bdf8" stroke-width="0.5" opacity="0.1"/>
    </pattern>
    <style>
      .label { font-family: system-ui, sans-serif; font-size: 14px; fill: #f8fafc; text-anchor: middle; }
      .title { font-family: system-ui, sans-serif; font-size: 18px; font-weight: bold; fill: #f8fafc; text-anchor: middle; text-transform: uppercase; letter-spacing: 1px; }
      .box { fill: #0f172a; stroke: #94a3b8; stroke-width: 2; rx: 4; }
      
      /* Shard Style */
      .shard-box { stroke: #fbbf24; stroke-width: 2; fill: #0f172a; }
      .shard-text { fill: #fbbf24; }
      
      /* Key Style */
      .key-path { fill: #38bdf8; }
      
      .line-split { stroke: #fbbf24; stroke-width: 1.5; stroke-dasharray: 5,3; marker-end: url(#arrow-gold); }
      .line-combine { stroke: #4ade80; stroke-width: 2; marker-end: url(#arrow-green); }
    </style>
    <marker id="arrow-gold" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#fbbf24" />
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4ade80" />
    </marker>
    
    <!-- Key Icon -->
    <symbol id="keyIcon" viewBox="0 0 24 24">
      <path d="M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"></path>
      <path d="M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"></path>
    </symbol>
  </defs>

  <!-- Background -->
  <rect width="800" height="400" fill="#1e293b" />
  <rect width="800" height="400" fill="url(#grid)" />

  <!-- Left: The Split -->
  <text x="200" y="40" class="title">Sharding (3 Parts)</text>
  
  <rect x="150" y="70" width="100" height="50" class="box" style="stroke:#38bdf8" />
  <text x="200" y="100" class="label" fill="#38bdf8" font-weight="bold">Master Key</text>

  <!-- Split Lines -->
  <line x1="200" y1="120" x2="100" y2="180" class="line-split" />
  <line x1="200" y1="120" x2="200" y2="180" class="line-split" />
  <line x1="200" y1="120" x2="300" y2="180" class="line-split" />

  <!-- Shards -->
  <rect x="60" y="180" width="80" height="40" class="box shard-box" />
  <text x="100" y="205" class="label shard-text">Shard 1</text>
  
  <rect x="160" y="180" width="80" height="40" class="box shard-box" />
  <text x="200" y="205" class="label shard-text">Shard 2</text>
  
  <rect x="260" y="180" width="80" height="40" class="box shard-box" />
  <text x="300" y="205" class="label shard-text">Shard 3</text>
  
  <text x="200" y="260" class="label" fill="#fbbf24" font-size="12">Stored in different places</text>


  <!-- Divider -->
  <line x1="400" y1="50" x2="400" y2="350" stroke="#334155" stroke-width="2" stroke-dasharray="5,5" />


  <!-- Right: The Recovery -->
  <text x="600" y="40" class="title">Recovery (Threshold 2 of 3)</text>

  <!-- Active Shards -->
  <rect x="500" y="180" width="80" height="40" class="box shard-box" />
  <text x="540" y="205" class="label shard-text">Shard 1</text>
  
  <rect x="620" y="180" width="80" height="40" class="box shard-box" />
  <text x="660" y="205" class="label shard-text">Shard 3</text>

  <text x="750" y="205" class="label" fill="#94a3b8" font-size="10" font-style="italic">(Shard 2 Lost)</text>

  <!-- Combine Lines -->
  <line x1="540" y1="220" x2="600" y2="280" class="line-combine" />
  <line x1="660" y1="220" x2="600" y2="280" class="line-combine" />

  <!-- Recovered Key -->
  <rect x="550" y="280" width="100" height="50" class="box" style="stroke:#4ade80; stroke-width:3" />
  <text x="600" y="310" class="label" fill="#4ade80" font-weight="bold">Master Key</text>
  <text x="600" y="340" class="label" fill="#4ade80" font-size="12">RESTORED</text>

</svg>